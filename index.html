<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Hus_King's Note</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="icon" type="image/svg+xml" href="_media/icon.svg">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/sidebar.min.css" />
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-darklight-theme@latest/dist/style.min.css" title="docsify-darklight-theme" type="text/css" />
  <style>
    /* 设置中文字体为华文中宋 */
    body:lang(zh), h1:lang(zh), h2:lang(zh), h3:lang(zh), h4:lang(zh), h5:lang(zh), h6:lang(zh) {
      font-family: "华文中宋", "STZhongsong", serif !important;
    }

    /* 设置英文字体为 Times New Roman */
    body:lang(en), h1:lang(en), h2:lang(en), h3:lang(en), h4:lang(en), h5:lang(en), h6:lang(en) {
      font-family: "Times New Roman", Times, serif !important;
    }

    /* 确保段落和其他文本元素也应用相应字体 */
    p:lang(zh) {
      font-family: "华文中宋", "STZhongsong", serif !important;
    }

    p:lang(en) {
      font-family: "Times New Roman", Times, serif !important;
    }

    /* 如果需要，可以为侧边栏等特定元素设置字体 */
    .sidebar {
      font-family: "华文中宋", "STZhongsong", serif !important;
    }
  </style>
</head>
<body>
  <div id="app"></div>
  
  <!-- 添加自定义的白天黑夜切换按钮容器 -->
  <div style="position: fixed; top: 10px; right: 10px; z-index: 1000;">
    <toggle-button id="customThemeToggle"></toggle-button>
  </div>
  
  <!-- Docsify v4 -->
  <script>
    window.$docsify = {
      loadNavbar: true, // 保持 navbar 功能，但移除 fixed 样式
      loadSidebar: true,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md',
      },
      subMaxLevel: 2,
      sidebarDisplayLevel: 1, // 设置侧边栏默认展开层级
      coverpage: true,
      auto2top: true,
      logo: '_media/avatar.ico',
      name: 'Hus_King',
      nameLink: '/',
      repo: 'https://github.com/hus-king/note',
      themeColor: '#42b983', // 设置主题色，保证切换按钮可见
      // 关闭搜索功能
      // search: {
      //   maxAge: 86400000, 
      //   paths: ['/', '/note/', '/algorithm/', '/tech/', '/uav/', '/Sach/'],
      //   placeholder: {
      //     '/zh-cn/': '搜索',
      //     '/': 'Type to search',
      //   },
      //   noData: {
      //     '/zh-cn/': '找不到结果',
      //     '/': 'No Results',
      //   },
      //   depth: 4,
      //   hideOtherSidebarContent: false,
      //   namespace: 'website-1',
      //   pathNamespaces: ['/zh-cn', '/ru-ru', '/ru-ru/v1'],
      // },
      
      // 添加深色模式支持
      darklightTheme: {
        siteFont: 'Source Sans Pro,Helvetica Neue,Arial,sans-serif',
        defaultTheme: 'light',
        dark: {
          background: '#1c2022',
          toggleBtnBg: '#34495e',
          textColor: '#b4b4b4'
        },
        light: {
          background: 'white',
          toggleBtnBg: 'var(--theme-color)',
          textColor: 'var(--text-color-base)'
        }
      },
      progress: {
        position: 'top',
        color: 'var(--theme-color,#42b983)',
        height: '3px',
      },
    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js"></script>
  <script src="//unpkg.com/docsify-pdf-embed-plugin/src/docsify-pdf-embed.js"></script>
  <!-- 注释掉搜索插件 -->
  <!-- <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script> -->
  <script src="//cdn.jsdelivr.net/npm/docsify-edit-on-github"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-darklight-theme@latest/dist/index.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-clike.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-cpp.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-c.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css" />
  <script src="//cdn.jsdelivr.net/npm/marked@4"></script>
  <!-- CDN files for docsify-katex -->
  <script src="//cdn.jsdelivr.net/npm/docsify-katex@latest/dist/docsify-katex.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-progress@latest/dist/progress.min.js"></script>
  <script src="//unpkg.com/@rakutentech/docsify-code-inline/dist/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-terminal-block@1.0.3"></script>
  
  <!-- 自定义的白天黑夜切换按钮Web Component实现 -->
  <script>
    class DayNightToggleButton extends HTMLElement {
      constructor() {
        super();
        // 获取当前主题状态
        this.isDark = document.body.classList.contains('darkMode');
        this.render();
        this.setupEventListeners();
      }

      render() {
        const shadowRoot = this.attachShadow({ mode: 'open' });
        shadowRoot.innerHTML = `
          <style>
            .toggle-button {
              width: 60px;
              height: 30px;
              background-color: #f5f5f5;
              border-radius: 15px;
              display: flex;
              align-items: center;
              cursor: pointer;
              position: relative;
              transition: background-color 0.3s ease;
              border: 2px solid #ddd;
            }
            
            .toggle-button.dark {
              background-color: #333;
              border-color: #666;
            }
            
            .toggle-indicator {
              width: 26px;
              height: 26px;
              border-radius: 50%;
              background-color: #fff;
              box-shadow: 0 2px 5px rgba(0,0,0,0.2);
              position: absolute;
              left: 2px;
              transition: all 0.3s ease;
              display: flex;
              justify-content: center;
              align-items: center;
              overflow: hidden;
            }
            
            .toggle-button.dark .toggle-indicator {
              left: 32px;
              background-color: #ffdb4a;
            }
            
            .sun, .moon {
              position: absolute;
              transition: opacity 0.3s ease;
            }
            
            .sun {
              color: #ffdb4a;
              opacity: ${this.isDark ? 0 : 1};
            }
            
            .moon {
              color: #fff;
              opacity: ${this.isDark ? 1 : 0};
            }
            
            .toggle-button.dark .sun {
              opacity: 0;
            }
            
            .toggle-button.dark .moon {
              opacity: 1;
            }
          </style>
          <div class="toggle-button ${this.isDark ? 'dark' : ''}">
            <div class="toggle-indicator">
              <span class="sun">☀️</span>
              <span class="moon">🌙</span>
            </div>
          </div>
        `;
      }

      setupEventListeners() {
        const button = this.shadowRoot.querySelector('.toggle-button');
        button.addEventListener('click', () => {
          this.isDark = !this.isDark;
          button.classList.toggle('dark');
          
          // 触发原有的darklight主题切换按钮点击事件
          const darklightBtn = document.querySelector('.darkmode-toggle');
          if (darklightBtn) {
            darklightBtn.click();
          }
        });
        
        // 监听body类变化来同步按钮状态
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (mutation.attributeName === 'class') {
              const isDarkMode = document.body.classList.contains('darkMode');
              const buttonElem = this.shadowRoot.querySelector('.toggle-button');
              if (isDarkMode !== this.isDark) {
                this.isDark = isDarkMode;
                if (isDarkMode) {
                  buttonElem.classList.add('dark');
                } else {
                  buttonElem.classList.remove('dark');
                }
              }
            }
          });
        });
        
        observer.observe(document.body, { attributes: true });
      }
    }

    // 注册Web Component
    customElements.define('toggle-button', DayNightToggleButton);
    
    // 将原始切换按钮隐藏
    document.addEventListener('DOMContentLoaded', () => {
      // 等待原按钮加载
      setTimeout(() => {
        const originalToggleBtn = document.querySelector('.darkmode-toggle');
        if (originalToggleBtn) {
          originalToggleBtn.style.display = 'none';
        }
      }, 1000);
    });
  </script>
</body>
</html>



