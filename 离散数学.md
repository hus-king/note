# 1.3 集合运算的性质

设$E$为全集，$A, B, C \in P(E)$. 下面的恒等式给出了集合运算的主要算律.

### 等幂律
$$
A \cup A = A
$$
$$
A \cap A = A
$$

### 结合律
$$
(A \cup B) \cup C = A \cup (B \cup C)
$$
$$
(A \cap B) \cap C = A \cap (B \cap C)
$$

### 交换律
$$
A \cup B = B \cup A
$$
$$
A \cap B = B \cap A
$$

### 分配律
$$
A \cup (B \cap C) = (A \cup B) \cap (A \cup C)
$$
$$
A \cap (B \cup C) = (A \cap B) \cup (A \cap C)
$$

### 零元律
$$
A \cup \varnothing = A
$$
$$
A \cap \varnothing = \varnothing
$$

### 单位律
$$
A \cup E = E
$$
$$
A \cap E = A
$$

### 吸收律
$$
A \cup (\sim A) = E
$$
$$
A \cap (\sim A) = \varnothing
$$

### 补余律
$$
A \cup (A \cap B) = A
$$
$$
A \cap (A \cup B) = A
$$

### 差集律
$$
A - (B \cup C) = (A - B) \cap (A - C)
$$
$$
A - (B \cap C) = (A - B) \cup (A - C)
$$

### 德摩根律
$$
\sim (B \cup C) = \sim B \cap \sim C
$$
$$
\sim (B \cap C) = \sim B \cup \sim C
$$

### 双重否定律
$$
\sim \sim A = A
$$

### 命题 2.1.1
(1) 对任意集合$A$，根据定义有
$$
A \times \varnothing = \varnothing, \quad \varnothing \times A = \varnothing.
$$

(2) 一般地说，笛卡儿积运算不满足交换律，即
$$
A \times B \neq B \times A \quad (\text{当 } A \neq \varnothing \land B \neq \varnothing \land A \neq B \text{ 时}).
$$

(3) 笛卡儿积运算不满足结合律，即
$$
(A \times B) \times C \neq A \times (B \times C) \quad (\text{当 } A \neq \varnothing \land B \neq \varnothing \land C \neq \varnothing \text{ 时}).
$$

(4) 笛卡儿积运算对并和交运算满足分配律，即
$$
A \times (B \cup C) = (A \times B) \cup (A \times C),
$$
$$
(B \cup C) \times A = (B \times A) \cup (C \times A),
$$
$$
A \times (B \cap C) = (A \times B) \cap (A \times C),
$$
$$
(B \cap C) \times A = (B \times A) \cap (C \times A).
$$

(5) 若$A \subseteq C, B \subseteq D$，则$A \times B \subseteq C \times D$.

### 定义 2.2.3
对任意集合$A$，$A$上的全域关系$E_A$和恒等关系$I_A$分别定义为
$$
E_A = \{(x, y) | x \in A \land y \in A\} = A \times A,
$$
$$
I_A = \{(x, x) | x \in A\}.
$$

### 定义 2.3.3
设$F$和$G$均为二元关系，$F$和$G$的复合（也称作$G$对$F$的右复合）记作$F \circ G$，定义为
$$
F \circ G = \{(x, z) | \exists y \text{ 使得 } (x, y) \in F, (y, z) \in G\}.
$$

#### 例 2.3.2
设$F = \{(3, 3), (6, 2)\}, G = \{(2, 3)\}$，则
$$
F^{-1} = \{(3, 3), (2, 6)\},
$$
$$
F \circ G = \{(6, 3)\},
$$
$$
G \circ F = \{(2, 3)\}.
$$

类似地，也可以定义关系的左复合，即
$$
F \circ G = \{(x, z) | \exists y \text{ 使得 } (x, y) \in G \land (y, z) \in F\}.
$$

如果把二元关系看作一种作用，则$(x, y) \in R$可以解释为$x$通过$R$的作用变为$y$，那么右复合$F \circ G$与左复合$F \circ G$都表示两个作用的连续发生。所不同的是：右复合$F \circ G$表示右边的$G$是复合到$F$上的第二步作用，而左复合$F \circ G$恰好相反，其中$F$是复合到$G$上的第二步作用。这两种规定都是合理的，正如在交通规则中有的国家规定右行，有的国家规定左行一样。本书采用右复合的定义，而在其他的书中可能采用左复合的定义，请读者注意两者的区别。

### 定义 2.3.4
设$R$是一个二元关系，$A$是一个集合。
(1)$R$在$A$上的限制，记作$R \upharpoonright A$，定义为
$$
R \upharpoonright A = \{(x, y) | (x, y) \in R, x \in A\}.
$$

(2)$A$在$R$下的像，记作$R[A]$，定义为
$$
R[A] = \operatorname{ran}(R \upharpoonright A).
$$

不难看出，$R$在$A$上的限制$R \upharpoonright A$是$R$的子关系，而$A$在$R$下的像$R[A]$是$\operatorname{ran} R$的子集。

### 定理 2.3.4
设$F, G, H$为任意关系，则
(1)$F \circ (G \cup H) = F \circ G \cup F \circ H$.
(2)$(G \cup H) \circ F = G \circ F \cup H \circ F$.
(3)$F \circ (G \cap H) \subseteq F \circ G \cap F \circ H$.
(4)$(G \cap H) \circ F \subseteq G \circ F \cap H \circ F$.

### 定理 2.3.5
设$F$为关系，$A, B$为集合，则
(1)$F \upharpoonright (A \cup B) = F \upharpoonright A \cup F \upharpoonright B$.
(2)$F[A \cup B] = F[A] \cup F[B]$.
(3)$F \upharpoonright (A \cap B) = F \upharpoonright A \cap F \upharpoonright B$.
(4)$F[A \cap B] \subseteq F[A] \cap F[B]$.

### 定义 2.3.5
设$R$为$A$上的关系，$n$为自然数，则$R$的$n$次幂$R^n$定义为
(1)$R^0 = \{(x, x) | x \in A\} = I_A$,
(2)$R^{n+1} = R^n \circ R$.

由以上定义可知，对于$A$上的任何关系$R_1$和$R_2$都有
$$
R_1^0 = R_2^0 = I_A.
$$

### 定理 2.3.6
设$A$为$n$元集，$R$是$A$上的关系，则存在不相等的自然数$s$和$t$，使得$R^s = R^t$.

### 定理 2.3.7
设$R$为$A$上的关系，$m, n \in \mathbb{N}$，则
(1)$R^m \circ R^n = R^{m+n}$.
(2)$(R^m)^n = R^{mn}$.

### 定理 2.3.8
设$R$为$A$上的关系，若存在自然数$s, t, s < t$，使得$R^s = R^t$，则
(1) 对任何$k \in \mathbb{N}$有$R^{s+k} = R^{t+k}$.
(2) 对任何$k, i \in \mathbb{N}$有$R^{s+kp+i} = R^{s+i}$，其中$p = t-s$.
(3) 令$S = \{R^0, R^1, \ldots, R^{t-1}\}$，则对于任意的$q \in \mathbb{N}$有$R^q \in S$.

---

# 2.4 关系的性质

关系的性质主要有以下 5 种：自反性、反自反性、对称性、反对称性和传递性.

### 定义 2.4.1
设$R$为$A$上的关系.
(1) 若对任意$x \in A$，均有$\langle x, x \rangle \in R$，则称$R$为$A$上的自反关系.
(2) 若对任意$x \in A$，均有$\langle x, x \rangle \notin R$，则称$R$为$A$上的反自反关系.

### 定义 2.4.2
设$R$为$A$上的关系.
(1) 若对任意$\langle x, y \rangle \in R$，均有$\langle y, x \rangle \in R$，则称$R$为$A$上的对称关系.
(2) 若当$\langle x, y \rangle \in R$且$\langle y, x \rangle \in R$时，必有$x = y$，则称$R$为$A$上的反对称关系.

### 定义 2.4.3
设$R$为$A$上的关系，若当$\langle x, y \rangle \in R$且$\langle y, z \rangle \in R$时，必有$\langle x, z \rangle \in R$，则称$R$为$A$上的传递关系.

### 解
$R_1$和$R_3$是$A$上的传递关系，$R_2$不是$A$上的传递关系.

下面分别给出这 5 种性质成立的充分必要条件.

### 定理 2.4.1
设$R$为$A$上的关系，则
(1)$R$在$A$上自反当且仅当$I_A \subseteq R$.
(2)$R$在$A$上反自反当且仅当$R \cap I_A = \varnothing$.
(3)$R$在$A$上对称当且仅当$R = R^{-1}$.
(4)$R$在$A$上反对称当且仅当$R \cap R^{-1} \subseteq I_A$.
(5)$R$在$A$上传递当且仅当$R \circ R \subseteq R$.

### 性质表

| 表示形式       | 自反性               | 反自反性             | 对称性               | 反对称性             | 传递性               |
|----------------|----------------------|----------------------|----------------------|----------------------|----------------------|
| **集合表达式** |$I_A \subseteq R$|$R \cap I_A = \varnothing$|$R = R^{-1}$    |$R \cap R^{-1} \subseteq I_A$|$R \circ R \subseteq R$|
| **关系矩阵**   | 主对角线元素全是 1   | 主对角线元素全是 0   | 矩阵是对称矩阵      | 若$r_{ij} = 1$且$i \neq j$，则$r_{ji} = 0$| 对$M^2$中 1 所在的位置，$M$中相应的位置都是 1 |
| **关系图**     | 每个顶点都有环       | 每个顶点都没有环     | 如果两个顶点之间有边，那么一定是一对方向相反的边（无单边） | 如果两个顶点之间有边，那么一定是两条有向边（无双向边） | 如果从顶点$x_i$到$x_j$有边，从$x_j$到$x_k$有边，那么从$x_i$到$x_k$也有边 |

## 2.5 关系的闭包

设 $R$ 是 $A$ 上的关系，我们希望 $R$ 具有某些有用的性质，如自反性。如果 $R$ 不具有自反性，那么可以通过在 $R$ 中添加一部分有序对来改造 $R$，得到新的关系 $R'$，使得 $R'$ 具有自反性，但又不希望 $R'$ 与 $R$ 相差太大。换句话说，添加的有序对要尽可能少，满足这些要求的 $R'$ 就称作 $R$ 的自反闭包。通过添加有序对来构造的闭包除自反闭包外还有对称闭包和传递闭包。

### 定义 2.5.1
设 $R$ 是非空集合 $A$ 上的关系，$R$ 的自反（对称或传递）闭包是 $A$ 上的关系 $R'$，使得 $R'$ 满足以下条件：
1. $R'$ 是自反的（对称或传递的）；
2. $R \subseteq R'$；
3. 对 $A$ 上任何包含 $R$ 的自反（对称或传递）关系 $R''$，有 $R' \subseteq R''$。

一般将 $R$ 的自反闭包记作 $r(R)$，对称闭包记作 $s(R)$，传递闭包记作 $t(R)$。

下面的定理给出了构造闭包的方法。

### 定理 2.5.1
设 $R$ 为 $A$ 上的关系，则有：
1. $r(R) = R \cup R^0$.
2. $s(R) = R \cup R^{-1}$.
3. $t(R) = R \cup R^2 \cup R^3 \cup \dots$.

### 推论 2.5.1
设 $R$ 为有穷集 $A$ 上的关系，则存在正整数 $r$ 使得
$$
t(R) = R \cup R^2 \cup R^3 \cup \dots \cup R^r.
$$

### 定理 2.5.3
设 $R_1$ 和 $R_2$ 是非空集合 $A$ 上的关系，且 $R_1 \subseteq R_2$，则
1. $r(R_1) \subseteq r(R_2)$.
2. $s(R_1) \subseteq s(R_2)$.
3. $t(R_1) \subseteq t(R_2)$.

证明留作练习。

### 定理 2.5.4
设 $R$ 是非空集合 $A$ 上的关系。
1. 若 $R$ 是自反的，则 $s(R)$ 与 $t(R)$ 也是自反的。
2. 若 $R$ 是对称的，则 $r(R)$ 与 $t(R)$ 也是对称的。
3. 若 $R$ 是传递的，则 $r(R)$ 也是传递的。

---

## 2.6 等价关系与划分

等价关系是一类重要的二元关系。

### 定义 2.6.1
设 $R$ 为非空集合 $A$ 上的关系。如果 $R$ 是自反的、对称的和传递的，那么称 $R$ 为 $A$ 上的等价关系。设 $R$ 是一个等价关系，若 $(x, y) \in R$，则称 $x$ 等价于 $y$，记作 $x \sim y$。

### 定义 2.6.2
设 $R$ 为非空集合 $A$ 上的等价关系，$\forall x \in A$，令
$$
[x]_R = \{y \mid y \in A, (x, y) \in R\},
$$
称 $[x]_R$ 为 $x$ 关于 $R$ 的等价类，简称为 $x$ 的等价类，简记为 $[x]$ 或 $\overline{x}$。

### 定理 2.6.1
设 $R$ 为非空集合 $A$ 上的等价关系，则
1. $\forall x \in A$, $[x]$ 是 $A$ 的非空子集。
2. $\forall x, y \in A$，如果 $x R y$，那么 $[x] = [y]$。
3. $\forall x, y \in A$，如果 $x \not R y$，那么 $[x] \cap [y] = \varnothing$。
4. $\bigcup \{[x] \mid x \in A\} = A$。

### 定义 2.6.3
设 $R$ 为非空集合 $A$ 上的等价关系，以 $R$ 的所有等价类作为元素的集合称为 $A$ 关于 $R$ 的商集，记作 $A/R$，即
$$
A/R = \{[x]_R \mid x \in A\}.
$$

与等价关系及商集有密切联系的概念是集合的划分。先给出划分的定义。

### 定义 2.6.4
设 $A$ 为非空集合，若 $A$ 的子集族 $\pi \subseteq P(A)$ 满足下面的条件：
1. $\varnothing \notin \pi$；
2. $\forall X, Y \in \pi$，若 $X \neq Y$，则 $X \cap Y = \varnothing$；
3. $\bigcup \pi = A$，
则称 $\pi$ 是 $A$ 的一个划分，称 $\pi$ 中的元素为 $A$ 的划分块。

---

## 2.7 偏序关系

下面介绍另一种重要的关系——偏序关系。

### 定义 2.7.1
设 $R$ 为非空集合 $A$ 上的关系。如果 $R$ 是自反的、反对称的和传递的，那么称 $R$ 为 $A$ 上的偏序关系，记作 $\leqslant$。设 $\leqslant$ 为偏序关系，若 $(x, y) \in \leqslant$，则记作 $x \leqslant y$，读作 $x$ “小于或等于” $y$。

### 定义 2.7.2
设 $\leqslant$ 为非空集合 $A$ 上的偏序关系，对 $\forall x, y \in A$，定义：
1. $x < y$，如果 $x \leqslant y$ 且 $x \neq y$；
2. $x$ 与 $y$ 是可比的，如果 $x \leqslant y$ 或 $y \leqslant x$。

上面定义中的 $x < y$ 读作 $x$ “小于” $y$。这里所说的“小于”是指在偏序中 $x$ 排在 $y$ 的前边。

### 定义 2.7.3
设 $R$ 为非空集合 $A$ 上的偏序关系，若 $\forall x, y \in A$，$x$ 与 $y$ 都是可比的，则称 $R$ 为 $A$ 上的全序关系（或线序关系）。

例如，数集上的小于或等于关系是全序关系，因为任何两个数总是可以比较大小的。但整除关系一般说来不是全序关系，如集合 $\{1, 2, 3\}$ 上的整除关系就不是全序关系，因为 $2$ 和 $3$ 不可比。

### 定义 2.7.4
集合 $A$ 和 $A$ 上的偏序关系 $\leqslant$ 一起称作偏序集，记作 $(A, \leqslant)$。

例如，整数集 $\mathbb{Z}$ 和数的小于或等于关系 $\leqslant$ 构成偏序集 $(\mathbb{Z}, \leqslant)$，集合 $A$ 的幂集 $P(A)$ 和包含关系 $R_\subseteq$ 构成偏序集 $(P(A), R_\subseteq)$。

### 定义 2.7.5
设 $(A, \leqslant)$ 为偏序集，$\forall x, y \in A$，若 $x < y$ 且不存在 $z \in A$ 使得 $x < z < y$，则称 $y$ 覆盖 $x$。

例如，集合 $\{1, 2, 4, 6\}$ 上的整除关系有 $2$ 覆盖 $1$；$4$ 和 $6$ 都覆盖 $2$；但是 $4$ 不覆盖 $1$，因为有 $1 < 2 < 4$；$6$ 也不覆盖 $4$，因为 $4 < 6$ 不成立。

在画偏序集 $(A, \leqslant)$ 的哈斯图时，首先适当排列顶点的顺序，使得：$\forall x, y \in A$，若 $x < y$，则将 $x$ 画在 $y$ 的下方。对于 $A$ 中的两个不同元素 $x$ 和 $y$，如果 $y$ 覆盖 $x$，就用一条线段连接 $x$ 和 $y$。

### 定义 2.7.6
设 $(A, \leqslant)$ 为偏序集，$B \subseteq A, y \in B$。
1. 若对任意 $x \in B$，均有 $y \leqslant x$ 成立，则称 $y$ 为 $B$ 的最小元。
2. 若对任意 $x \in B$，均有 $x \leqslant y$ 成立，则称 $y$ 为 $B$ 的最大元。
3. 若对任意 $x \in B$，当 $x \leqslant y$ 时，必有 $x = y$，则称 $y$ 为 $B$ 的极小元。
4. 若对任意 $x \in B$，当 $y \leqslant x$ 时，必有 $x = y$，则称 $y$ 为 $B$ 的极大元。

从以上定义可以看出，最小元与极小元是不一样的。最小元是 $B$ 中最小的元素，它与 $B$ 中其他元素都可比；而极小元不一定与 $B$ 中元素都可比，只要没有比它小的元素，它就是极小元。对于有穷集 $B$，极小元一定存在，但最小元不一定存在。最小元如果存在，一定是唯一的。

### 定义 2.7.7
设 $(A, \leqslant)$ 为偏序集，$B \subseteq A, y \in A$。
1. 若对任意 $x \in B$，均有 $x \leqslant y$ 成立，则称 $y$ 为 $B$ 的上界。
2. 若对任意 $x \in B$，均有 $y \leqslant x$ 成立，则称 $y$ 为 $B$ 的下界。
3. 令 $C = \{y \mid y \text{ 为 } B \text{ 的上界}\}$，则称 $C$ 的最小元为 $B$ 的最小上界或上确界。
4. 令 $D = \{y \mid y \text{ 为 } B \text{ 的下界}\}$，则称 $D$ 的最大元为 $B$ 的最大下界或下确界。

由以上定义可知，$B$ 的最小元一定是 $B$ 的下界，同时也是 $B$ 的最大下界。同样地，$B$ 的最大元一定是 $B$ 的上界，同时也是 $B$ 的最小上界。但反过来不一定正确，$B$ 的下界不一定是 $B$ 的最小元，因为它可能不是 $B$ 中的元素。同样地，$B$ 的上界也不一定是 $B$ 的最大元。

$B$ 的上界、下界、最小上界、最大下界都可能不存在。如果存在，最小上界与最大下界是唯一的。
